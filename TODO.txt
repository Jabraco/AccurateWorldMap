




local function NormalizePreferredMousePositionToMap()
    if IsInGamepadPreferredMode() then
        local x, y = ZO_WorldMapScroll:GetCenter()
        return NormalizePointToControl(x, y, ZO_WorldMapContainer)
    else
        return NormalizeMousePositionToControl(ZO_WorldMapContainer)
    end
end

- add lore descriptions to all zones

- change subtitle shadow text to be more legible

ZO_WorldMapMouseOverDescription:SetText(poiFinishedDesc)

things to get breaux to add to the map:

- Dranil Kir (mini zone)

- Silitar (mini zone)

- Vivec City on vvardenfell

things to ask breaux to do:

- ask for blob for earth forge in reach map, get breaux to draw one


your todo:

- add arcane university battlegroudn blob using blackreach circle blobs

- lam settings
- refactor

- figure out why texture control isn't working on startup, have to hide/show it




- update zoneinfo checker so that it isn't reliant on texture info and both normalised coords  to do anything


- update print function to only print out if isDebug is enabled

- hide player marker and group markers on world map for v1

- add dragonhold island to the map

- sort out options menu

* SetAnchor *protected-attributes* (*[AnchorPosition|#AnchorPosition]* _point_, *object* _relativeTo_, *[AnchorPosition|#AnchorPosition]* _relativePoint_, *layout_measurement* _offsetX_, *layout_measurement* _offsetY_, *[AnchorConstrains|#AnchorConstrains]* _anchorConstrains_)

* GetAnchor(*integer* _anchorIndex_)
** _Returns:_ *bool* _isValidAnchor_, *integer* _point_, *object* _relativeTo_, *integer* _relativePoint_, *number* _offsetX_, *number* _offsetY_, *[AnchorConstrains|#AnchorConstrains]* _anchorConstrains_

- Arcane University (in cyrodiil)


- Remove dragonhold from the map when you've done the quest

add descriptions to zoneinfo

- remove AWM options panel and dependency if you're not using it

okay, so: options
Map Style (drop down)
- Vanilla (default)
- Geographic/Immersive

Blob Style (drop down)
- Vanilla (default)
- Graded
- Immersive

Other Options:
- Enable lore friendly renames (off by default)
- Move dungeons to lore positions (on by default)
- turn off wayshrines on world map (off by default)
- enable lore tooltips for zones (on by default) 
- enable province borders

https://cdn.discordapp.com/attachments/654414794144743425/940170823367553034/settings_ui.png










* EVENT_SHOW_WORLD_MAP

* EVENT_ZONE_CHANGED (*string* _zoneName_, *string* _subZoneName_, *bool* _newSubzone_, *integer* _zoneId_, *integer* _subZoneId_)


* EVENT_GROUP_TYPE_CHANGED (*bool* _largeGroup_)
* EVENT_GROUP_UPDATE
* EVENT_GROUP_MEMBER_JOINED (*string* _memberCharacterName_, *string* _memberDisplayName_, *bool* _isLocalPlayer_)
* EVENT_GROUP_MEMBER_LEFT (*string* _memberCharacterName_, *[GroupLeaveReason|#GroupLeaveReason]* _reason_, *bool* _isLocalPlayer_, *bool* _isLeader_, *string* _memberDisplayName_, *bool* _actionRequiredVote_)
* EVENT_GROUP_MEMBER_ROLE_CHANGED (*string* _unitTag_, *[LFGRole|#LFGRole]* _newRole_)
* EVENT_GROUP_MEMBER_SUBZONE_CHANGED

* EVENT_QUEST_ADVANCED (*luaindex* _journalIndex_, *string* _questName_, *bool* _isPushed_, *bool* _isComplete_, *bool* _mainStepChanged_)
* EVENT_QUEST_COMPLETE (*string* _questName_, *integer* _level_, *integer* _previousExperience_, *integer* _currentExperience_, *integer* _championPoints_, *[QuestType|#QuestType]* _questType_, *[InstanceDisplayType|#InstanceDisplayType]* _instanceDisplayType_)

* EVENT_GLOBAL_MOUSE_DOWN (*[MouseButtonIndex|#MouseButtonIndex]* _button_, *bool* _ctrl_, *bool* _alt_, *bool* _shift_, *bool* _command_)
* EVENT_GLOBAL_MOUSE_UP (*[MouseButtonIndex|#MouseButtonIndex]* _button_, *bool* _ctrl_, *bool* _alt_, *bool* _shift_, *bool* _command_)



- Remastered, vanilla-style map

- Lore friendly overhaul of the map in line with previous games

- Dungeon and wayshrines have been moved to compensate

- Dungeons in their lore friendly places




is it safe to put this onAddonLoaded btw?
parsing through big list of textures when game loads/reloadui starts (i think) will take a while
Baertram (Baertram)
hm I would not always do that, but only if there is the need to do that
like save to SavedVariables the GetAPIVersion() when it was last done and then set a flag "it was done" and check if this is true or false. If false: do the run once and update the apiversion last checked and the done flag



"Fans have been asking ZOS for years to fix the ESO World Map, and they still haven't done it. So, we thought we'd fix it ourselves."

- add clickable area to arcane university battleground



add to readme:

the addons Destinations and Map Pins will add the old locations for certain wayshrines/dungeons to the map. Untick "unknown poi"'s to fix this


Note: after installing, some dungeon, wayshrines will be moved to a more lore friendly location, and thus will NOT match the in-game locations. This is intentional, and will not be changed.

the local zone map locations for dungeons remain as-is.

thanks to Guild Shrines, Highly Detailed World Map, World Wayshrine Commander


"The player location is wrong"

yes, this is because ZOS's zones are in the wrong position, and it is something we can't fix. ZOS themselves have run up to this issue with northern elsweyr, when you go up to the reapers march entrance, it puts you in cyrodiil


even if you don't care about the correctness of the map, this addon still offers something for you! it helps keep the worldmap clear of icon spam by moving some dungeons to their physical locations instead of where their entrances are




Thanks To:


- Breaux, for drawing up the map
- [Author of highly detailed world map], for inspiration
- Emily, for help along the way
- TPC9000, for coding help
- ESOUI addon community for their help and assistance
- votan, sirinsinirator, sharlikan


local zos_GetMapMouseoverInfo = GetMapMouseoverInfo
GetMapMouseoverInfo = function(xN, yN)
  [..]

  -- if the current map is not set to exclusive, or we don't have any data for it, get vanilla values
  if (isExclusive == false or mapData[mapIndex] == nil) then
    locationName, textureFile, widthN, heightN, locXN, locYN = zos_GetMapMouseoverInfo(xN, yN)
  end

  if (mapData[mapIndex] ~= nil) then
    if (isInBlobHitbox) then 

    	[..]

    	--
        if (currentZoneInfo.zoneDescription ~= nil) then
          ZO_WorldMapMouseOverDescription:SetText(poiFinishedDesc)
        end
        --

    end
  end
  return locationName, textureFile, widthN, heightN, locXN, locYN
end